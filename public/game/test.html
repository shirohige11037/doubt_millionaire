<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="test.css">
    <title>CardAnimation</title>
  </head>

  <body>
    <div id="area">
      <canvas id="gameScene"></canvas>
    </div>

    <script type="module">
      //==================================================
      // anim.js から関数をimport
      //==================================================
      import {
        drawAll,
        initCanvas,
        initCard,
        mouseClick,
        mouseHover,
        returnSelectedCardCount,
        setDispSize,
      } from "./anim.js";

      //==================================================
      // 関数
      //==================================================

      ///////////////////////////////////////////

      // ソート用データを生成
      const playerCardData = [];
      const playerCard = 10;

      for (let i = 0; i < playerCard; i++) {
        const SuitRandom = Math.floor(Math.random() * 4) + 1;
        const RankRandom = Math.floor(Math.random() * 10) + 1;

        let Suit = "";
        if (SuitRandom === 1) Suit = "C";
        else if (SuitRandom === 2) Suit = "D";
        else if (SuitRandom === 3) Suit = "H";
        else if (SuitRandom === 4) Suit = "S";

        //tempCards配列にスート、ランク、画像の順で要素を持たせる（構造体のようなもの）
        playerCardData.push({
          suit: Suit,
          rank: RankRandom,
        });
      }

      ///////////////////////////////////////////

      //引数：手札のスートとランクの配列、手札の位置
      //返り値：選択されたカードの枚数

      //初期セットアップ
      initCanvas(300); //カード列が表示される位置（y座標）
      setDispSize();
      initCard(playerCardData); //引数：プレイヤーのカードデータ
      //描画
      drawAll();

      //マウスイベント
      mouseHover();
      mouseClick();

      //返り値
      let value = returnSelectedCardCount();
      console.log(value);

      //リサイズ対応
      window.addEventListener("resize", () => setDispSize());
    </script>
  </body>
</html>
